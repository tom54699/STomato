# Tomato App é–‹ç™¼æ—¥èªŒ - Claude Agent

**æ—¥æœŸ**: 2025-12-03
**ä½œè€…**: Claude (AI Agent)
**æœ€å¾Œæ›´æ–°**: 2025-12-03

---

## æœ¬æ¬¡é–‹ç™¼æ‘˜è¦

### æ”¹å‹•å…ƒä»¶æ¸…å–®

æœ¬æ¬¡æ”¹å‹•ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å…ƒä»¶ï¼š

1. **Home.tsx** (é¦–é /ç•ªèŒ„é˜ä¸»ç•«é¢)
2. **StudyPlanner.tsx** (è®€æ›¸è¨ˆç•«)
3. **Insights.tsx** (æ´å¯Ÿ/çµ±è¨ˆé ) - **æ–°å¢è¨ˆç•«åˆ†æåŠŸèƒ½**
4. **Settlement.tsx** (çµç®—é ) - è¼•å¾®èª¿æ•´
5. **App.tsx** - ç‹€æ…‹ç®¡ç†æ›´æ–°

### ä¸»è¦åŠŸèƒ½æ–°å¢

#### 1. ç´¯ç©ç•ªèŒ„é˜è¿½è¹¤ç³»çµ± (Cumulative Pomodoro Tracking)

**ç›®çš„**: è®“é•·æ™‚é–“å­¸ç¿’è¨ˆç•«ï¼ˆå¦‚ 90 åˆ†é˜ï¼‰å¯é€éå¤šæ¬¡ç•ªèŒ„é˜ç´¯ç©å®Œæˆï¼Œè€Œéä¸€æ¬¡å®Œæˆã€‚

**å¯¦ä½œç´°ç¯€**:
- åœ¨ `StudyPlan` å‹åˆ¥ä¸­æ–°å¢ä¸‰å€‹æ¬„ä½ï¼š
  - `targetMinutes?: number` - è¨ˆç•«ç¸½æ™‚é•·ï¼ˆåˆ†é˜ï¼‰
  - `completedMinutes?: number` - å·²å®Œæˆæ™‚é•·ï¼ˆåˆ†é˜ï¼‰
  - `pomodoroCount?: number` - å®Œæˆçš„ç•ªèŒ„é˜æ•¸é‡

**æª”æ¡ˆ**: `Home.tsx` (lines 14-21), `StudyPlanner.tsx` (lines 14-21)

```typescript
type StudyPlan = {
  id: string;
  title: string;
  date: string;
  startTime: string;
  endTime: string;
  location?: string;
  reminderTime: string;
  reminderDateTime: string;
  completed: boolean;
  reminderTriggered: boolean;
  targetMinutes?: number; // NEW
  completedMinutes?: number; // NEW
  pomodoroCount?: number; // NEW
};
```

**è‡ªå‹•å®Œæˆé‚è¼¯**:
- ç•¶ `completedMinutes >= targetMinutes` æ™‚ï¼Œè‡ªå‹•æ¨™è¨˜ `completed: true`
- å¯¦ä½œä½ç½®ï¼š`Home.tsx` lines 132-160

**UI é¡¯ç¤º**:
- åœ¨ä»Šæ—¥è¨ˆç•«åˆ—è¡¨ä¸­é¡¯ç¤ºé€²åº¦ï¼šã€Œå·²å®Œæˆ 25/90 åˆ†é˜ (1ğŸ…)ã€
- å¯¦ä½œä½ç½®ï¼š`Home.tsx` lines 623-629

---

#### 2. åœ“ç’°èª¿æ•´èˆ‡è¨ˆç•«æŒ‰éˆ•åŒæ­¥

**ç›®çš„**: è®“ä½¿ç”¨è€…é€éåœ“ç’°æ‹–æ›³èª¿æ•´ç•ªèŒ„é˜æ™‚é–“å¾Œï¼Œè¨ˆç•«æŒ‰éˆ•é¡¯ç¤ºä¸¦ä½¿ç”¨è©²æ™‚é–“ã€‚

**å¯¦ä½œç´°ç¯€**:
- è¨ˆç•«å•Ÿå‹•æŒ‰éˆ•æ”¹ç‚ºé¡¯ç¤ºç•¶å‰åœ“ç’°è¨­å®šçš„åˆ†é˜æ•¸
- é»æ“ŠæŒ‰éˆ•æ™‚ä½¿ç”¨ `minutes` stateï¼ˆä¾†è‡ªåœ“ç’°ï¼‰å•Ÿå‹•è¨ˆæ™‚å™¨
- æŒ‰éˆ•æ–‡å­—å‹•æ…‹é¡¯ç¤ºï¼š`{minutes}` åˆ†é˜

**æª”æ¡ˆ**: `Home.tsx` lines 641-650

```typescript
<button
  onClick={() => startTimerWithPlan(plan.id, minutes)}
  className="group relative bg-white border-2 border-indigo-300 hover:border-indigo-500 text-indigo-600 hover:text-white hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-500 px-4 py-2 rounded-full font-medium shadow-md hover:shadow-xl active:scale-95 transition-all flex items-center gap-2"
  title={`é–‹å§‹ ${minutes} åˆ†é˜ç•ªèŒ„é˜ï¼ˆå¯åœ¨ä¸Šæ–¹åœ“ç’°èª¿æ•´ï¼‰`}
>
  <Play className="w-4 h-4" />
  <span className="text-sm font-bold">{minutes}</span>
</button>
```

**ä½¿ç”¨æµç¨‹**:
1. ä½¿ç”¨è€…æ‹–æ›³åœ“ç’°èª¿æ•´æ™‚é–“ï¼ˆä¾‹å¦‚ï¼š30 åˆ†é˜ï¼‰
2. ä»Šæ—¥è¨ˆç•«çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•é¡¯ç¤ºã€Œ30ã€
3. é»æ“Šå¾Œé–‹å§‹ 30 åˆ†é˜ç•ªèŒ„é˜
4. å®Œæˆå¾Œç´¯ç©åˆ°è¨ˆç•«é€²åº¦ä¸­

---

#### 3. UI/UX æ”¹é€²

##### 3.1 é¦–é è¨ˆç•«æŒ‰éˆ•é‡æ–°è¨­è¨ˆ

**æ”¹å‹•å‰**:
- çŸ©å½¢æŒ‰éˆ•
- ç´”æ–‡å­—é¡¯ç¤º
- è¦–è¦ºå±¤æ¬¡ä¸æ˜ç¢º

**æ”¹å‹•å¾Œ**:
- **åœ“å½¢åœ–ç¤ºæŒ‰éˆ•** (rounded-full)
- **æ¼¸å±¤ hover æ•ˆæœ**: indigo â†’ purple
- **ç™½è‰²åº• + æ¼¸å±¤é‚Šæ¡†**
- **åœ–ç¤º + æ•¸å­—çµ„åˆ**: Play icon + åˆ†é˜æ•¸
- **ç¸®æ”¾å‹•ç•«**: active:scale-95
- **Tooltip**: é¡¯ç¤ºã€Œé–‹å§‹ XX åˆ†é˜ç•ªèŒ„é˜ï¼ˆå¯åœ¨ä¸Šæ–¹åœ“ç’°èª¿æ•´ï¼‰ã€

**å¯¦ä½œä½ç½®**: `Home.tsx` lines 641-650

##### 3.2 StudyPlanner ä¸‹æ‹‰é¸å–®æ”¹é€²

**å­¸ç¿’æ™‚é•·ä¸‹æ‹‰é¸å–®**:
- **è—è‰²æ¼¸å±¤èƒŒæ™¯**: `from-blue-50 to-indigo-50`
- **emoji æ¨™ç¤º**: â±ï¸ â°
- **åœ“è§’é‚Šæ¡†**: `rounded-2xl`
- **hover/focus æ•ˆæœ**: é‚Šæ¡†é¡è‰²è®ŠåŒ– + ring æ•ˆæœ
- **å¯¦ä½œä½ç½®**: `StudyPlanner.tsx` lines 329-348

**é–‹å§‹æ™‚é–“ä¸‹æ‹‰é¸å–®**:
- **ç¶ è‰²æ¼¸å±¤èƒŒæ™¯**: `from-green-50 to-emerald-50`
- **ç‹€æ…‹æ¨™ç¤º**: âœ… (å¯ç”¨) / âŒ (è¡çª)
- **è¡çªæç¤º**: é¡¯ç¤ºã€Œèˆ‡ XXX è¨ˆç•«è¡çªã€
- **å¯¦ä½œä½ç½®**: `StudyPlanner.tsx` lines 350-371

**æ”¹é€²å‰å¾Œå°æ¯”**:

| é …ç›® | æ”¹é€²å‰ | æ”¹é€²å¾Œ |
|------|--------|--------|
| èƒŒæ™¯ | ç´”ç™½ | æ¼¸å±¤è‰²å½© |
| é‚Šæ¡† | ç°è‰² | å½©è‰² + å‹•æ…‹æ•ˆæœ |
| åœ–ç¤º | ç„¡ | Emoji æ¨™ç¤º |
| äº’å‹•å›é¥‹ | åŸºæœ¬ | Hover + Focus Ring |

---

#### 4. Insights è¨ˆç•«åˆ†æåŠŸèƒ½

**ç›®çš„**: åœ¨æ´å¯Ÿé é¢æ–°å¢é‡å°è®€æ›¸è¨ˆç•«çš„è©³ç´°åˆ†æï¼Œè®“ä½¿ç”¨è€…äº†è§£è¨ˆç•«åŸ·è¡Œç‹€æ³ã€‚

**å¯¦ä½œç´°ç¯€**:

**ä¸»åˆ†é è¨­è¨ˆ**:
- æ–°å¢åˆ†é åˆ‡æ›å™¨ï¼šğŸ“Š å°ˆæ³¨è¶¨å‹¢ ï½œ ğŸ“… è¨ˆç•«åˆ†æ
- ä½¿ç”¨ `mainTab` state æ§åˆ¶é¡¯ç¤ºå…§å®¹
- ä¿ç•™åŸæœ‰å°ˆæ³¨è¶¨å‹¢åŠŸèƒ½

**è¨ˆç•«åˆ†æåŠŸèƒ½æ¨¡çµ„**:

1. **å®Œæˆç‡ç¸½è¦½** (Plan Completion Overview)
   - ä¸‰ç‹€æ…‹çµ±è¨ˆå¡ç‰‡ï¼šå·²å®Œæˆ / é€²è¡Œä¸­ / æœªé–‹å§‹
   - å®Œæˆç‡é€²åº¦æ¢ï¼ˆç¶ è‰²æ¼¸å±¤ï¼‰
   - æœ¬é€±è¨ˆç•«ç¸½æ•¸çµ±è¨ˆ
   - ç©ºç‹€æ…‹å¼•å°ï¼ˆç„¡è¨ˆç•«æ™‚ï¼‰

2. **ç§‘ç›®æ™‚é–“åˆ†å¸ƒ** (Subject Time Distribution)
   - é¡¯ç¤ºå‰ 5 åç§‘ç›®/è¨ˆç•«æ¨™é¡Œ
   - æŒ‰å°ˆæ³¨æ™‚é–“æ’åºï¼ˆæœ€å¤šåœ¨å‰ï¼‰
   - é•·æ¢åœ–è¦–è¦ºåŒ–ï¼ˆæ¼¸å±¤è‰²å½©ï¼šç´«/è—/é›/ç²‰/æ©™ï¼‰
   - é¡¯ç¤ºåˆ†é˜æ•¸èˆ‡ç•ªèŒ„é˜æ•¸é‡
   - å¯¦ä½œä½ç½®ï¼š`Insights.tsx` lines 388-424

3. **æ™‚æ®µåˆ†æ** (Time Slot Analysis) - å¯å±•é–‹
   - ä¸‰æ™‚æ®µçµ±è¨ˆï¼šæ—©ä¸Š(6-12) / ä¸‹åˆ(12-18) / æ™šä¸Š(18-24)
   - æ¯æ™‚æ®µé¡¯ç¤ºï¼šè¨ˆç•«æ•¸é‡ã€å®Œæˆæ•¸é‡ã€å®Œæˆç‡
   - è¦–è¦ºåŒ–é€²åº¦æ¢ï¼ˆæ©™/é»ƒ/é›è‰²ç³»ï¼‰
   - ä½¿ç”¨ ChevronUp/Down åœ–ç¤ºé¡¯ç¤ºå±•é–‹ç‹€æ…‹
   - å¯¦ä½œä½ç½®ï¼š`Insights.tsx` lines 426-483

4. **ç´¯ç©é€²åº¦è¿½è¹¤** (Cumulative Progress Tracking) - å¯å±•é–‹
   - æ•´é«”é€²åº¦æ¢ï¼ˆç›®æ¨™åˆ†é˜ vs å®Œæˆåˆ†é˜ï¼‰
   - å¹³å‡ç•ªèŒ„é˜æ•¸/è¨ˆç•«çµ±è¨ˆ
   - ç´¯ç©å®Œæˆåˆ†é˜æ•¸å±•ç¤º
   - æç¤ºè¨Šæ¯ï¼šèªªæ˜é•·æ™‚é–“è¨ˆç•«ç´¯ç©æ©Ÿåˆ¶
   - å¯¦ä½œä½ç½®ï¼š`Insights.tsx` lines 485-541

**çµ±è¨ˆè¨ˆç®—é‚è¼¯**:

```typescript
// æœ¬é€±è¨ˆç•«ç¯©é¸ï¼ˆæœ€è¿‘ 7 å¤©ï¼‰
const weekPlans = plans.filter(plan => {
  const planDate = new Date(plan.date);
  return planDate >= weekAgo && planDate <= today;
});

// å®Œæˆç‡è¨ˆç®—
const completionRate = weekPlans.length > 0
  ? Math.round((completedPlans.length / weekPlans.length) * 100)
  : 0;

// ç§‘ç›®çµ±è¨ˆï¼ˆå¾ FocusLog å½™ç¸½ï¼‰
const subjectStats: { [key: string]: { minutes: number; count: number } } = {};
logs.forEach(log => {
  if (log.planTitle) {
    if (!subjectStats[log.planTitle]) {
      subjectStats[log.planTitle] = { minutes: 0, count: 0 };
    }
    subjectStats[log.planTitle].minutes += log.minutes;
    subjectStats[log.planTitle].count += 1;
  }
});

// æ™‚æ®µåˆ†æ
const timeSlotStats = {
  morning: { count: 0, completed: 0 },   // 6-12
  afternoon: { count: 0, completed: 0 }, // 12-18
  evening: { count: 0, completed: 0 },   // 18-24
};
```

**UI/UX è¨­è¨ˆè€ƒé‡**:

1. **é¿å…è³‡è¨Šéè¼‰**
   - ä½¿ç”¨ä¸»åˆ†é åˆ†é›¢ä¸åŒé¡å‹æ•¸æ“š
   - æ¬¡è¦è³‡è¨Šï¼ˆæ™‚æ®µã€ç´¯ç©é€²åº¦ï¼‰ä½¿ç”¨å¯å±•é–‹å€å¡Š
   - æ¸…æ™°çš„è¦–è¦ºå±¤æ¬¡èˆ‡é–“è·

2. **è‰²å½©ç³»çµ±**
   - ç¶ è‰²ç³»ï¼šå®Œæˆç›¸é—œï¼ˆå·²å®Œæˆã€å®Œæˆç‡ï¼‰
   - è—è‰²ç³»ï¼šé€²è¡Œä¸­ç‹€æ…‹
   - ç´«è‰²ç³»ï¼šç§‘ç›®åˆ†æ
   - æ©™/é»ƒè‰²ç³»ï¼šæ™‚æ®µåˆ†æ
   - ç°è‰²ï¼šæœªé–‹å§‹/ç©ºç‹€æ…‹

3. **äº’å‹•åé¥‹**
   - åˆ†é åˆ‡æ›å¹³æ»‘éæ¸¡
   - å¯å±•é–‹å€å¡Šçš„ Chevron åœ–ç¤ºåé¥‹
   - é€²åº¦æ¢ä½¿ç”¨ transition-all duration-500

4. **ç©ºç‹€æ…‹è¨­è¨ˆ**
   - ç„¡è¨ˆç•«æ™‚é¡¯ç¤ºå‹å–„å¼•å°
   - å¤§å‹ emoji + èªªæ˜æ–‡å­—
   - å¼•å°ä½¿ç”¨è€…å‰å¾€è®€æ›¸è¨ˆç•«é é¢

**æª”æ¡ˆ**: `Insights.tsx` (å…¨é¢æ”¹ç‰ˆï¼Œæ–°å¢ 330 è¡Œç¨‹å¼ç¢¼)

**ç›¸é—œå‹åˆ¥æ›´æ–°**:
```typescript
type StudyPlan = {
  // ... åŸæœ‰æ¬„ä½
  targetMinutes?: number;
  completedMinutes?: number;
  pomodoroCount?: number;
};

// æ–°å¢ state
const [mainTab, setMainTab] = useState<'focus' | 'plans'>('focus');
const [expandedSections, setExpandedSections] = useState({
  timeSlot: false,
  cumulative: false,
});
```

**æ•ˆèƒ½å„ªåŒ–**:
- ä½¿ç”¨ `useMemo` å¿«å–è¨ˆç•«çµ±è¨ˆè¨ˆç®—
- ä¾è³´é …ï¼š`[plans, logs]`
- é¿å…ä¸å¿…è¦çš„é‡æ–°è¨ˆç®—

---

## å‰©é¤˜åŠŸèƒ½èˆ‡å¾…è¾¦äº‹é …

### çŸ­æœŸå¾…è¾¦ï¼ˆ1-2 é€±å…§ï¼‰

1. **é€šçŸ¥ç³»çµ±**
   - æ•´åˆç€è¦½å™¨ Notification API
   - è¨ˆç•«æé†’é€šçŸ¥
   - ç•ªèŒ„é˜å®Œæˆé€šçŸ¥
   - éœ€è¦ä½¿ç”¨è€…æˆæ¬Š

2. **éŸ³æ•ˆç³»çµ±**
   - è¨ˆæ™‚å™¨å®ŒæˆéŸ³æ•ˆ
   - æŒ‰éˆ•é»æ“ŠéŸ³æ•ˆ
   - å¯é¸éœéŸ³æ¨¡å¼

3. **æˆå°±èˆ‡å¾½ç« **
   - å®šç¾©æˆå°±è¦å‰‡ï¼ˆä¾‹å¦‚ï¼šé€£çºŒ 7 å¤©ã€ç´¯ç© 100 å€‹ç•ªèŒ„é˜ï¼‰
   - å¾½ç«  UI è¨­è¨ˆ
   - æˆå°±è§¸ç™¼é‚è¼¯

4. **è³‡æ–™å‚™ä»½/åŒ¯å‡º**
   - åŒ¯å‡ºç‚º JSON
   - åŒ¯å…¥æ­·å²è³‡æ–™
   - LocalStorage è³‡æ–™æ¸…ç†æ©Ÿåˆ¶

### ä¸­æœŸå¾…è¾¦ï¼ˆ1 å€‹æœˆå…§ï¼‰

1. **å¾Œç«¯ API æ•´åˆ**
   - ä½¿ç”¨è€…èªè­‰ç³»çµ±
   - è³‡æ–™åŒæ­¥ï¼ˆè·¨è£ç½®ï¼‰
   - æ’è¡Œæ¦œå³æ™‚è¨ˆç®—
   - ç¤¾äº¤åŠŸèƒ½ï¼ˆæŒ‘æˆ°ã€å¥½å‹ï¼‰

2. **é€²éšè¨ˆç•«åŠŸèƒ½**
   - è¡Œäº‹æ›†æœˆæª¢è¦–
   - è¨ˆç•«ç¯„æœ¬èˆ‡è¤‡è£½
   - é‡è¤‡è¨ˆç•«ï¼ˆæ¯é€±/æ¯æ—¥ï¼‰
   - æ¨™ç±¤èˆ‡åˆ†é¡ç³»çµ±

3. **é€²éšçµ±è¨ˆ**
   - ç§‘ç›®/æ¨™ç±¤ç¶­åº¦åˆ†æ
   - æœ€ä½³å°ˆæ³¨æ™‚æ®µåˆ†æ
   - é€±/æœˆå ±å‘Šç”Ÿæˆ
   - è³‡æ–™è¦–è¦ºåŒ–å¢å¼·

4. **PWA å„ªåŒ–**
   - é›¢ç·šåŠŸèƒ½
   - App icon
   - å®‰è£æç¤º
   - èƒŒæ™¯åŒæ­¥

### é•·æœŸè¦åŠƒï¼ˆ3 å€‹æœˆ+ï¼‰

1. **è·¨å¹³å°**
   - iOS/Android Native App
   - æ¡Œé¢æ‡‰ç”¨ï¼ˆElectronï¼‰

2. **AI åŠŸèƒ½**
   - æ™ºèƒ½è¨ˆç•«æ¨è–¦
   - å°ˆæ³¨åº¦åˆ†æèˆ‡å»ºè­°
   - å­¸ç¿’æ•ˆç‡å„ªåŒ–æé†’

3. **ç¤¾ç¾¤åŠŸèƒ½**
   - å­¸ç¿’å°çµ„
   - å…±åŒå°ˆæ³¨æˆ¿é–“
   - å³æ™‚æ’è¡Œæ¦œ
   - ç¤¾ç¾¤æŒ‘æˆ°è³½

---

## æŠ€è¡“æ±ºç­–è¨˜éŒ„

### ç‚ºä½•é¸æ“‡ä¸‹æ‹‰é¸å–®è€Œéæ™‚é–“è»¸ UIï¼Ÿ

**æ™‚é–“**: 2025-12-03
**å•é¡Œ**: ä½¿ç”¨è€…åé¥‹æ™‚é–“é¸æ“‡ä»‹é¢éœ€è¦æ”¹é€²

**å˜—è©¦æ–¹æ¡ˆ B**: è¦–è¦ºåŒ–æ™‚é–“è»¸ï¼ˆ7:00-22:00ï¼Œå¯æ»‘å‹•ï¼‰
- **å„ªé»**: ç›´è¦ºã€è¦–è¦ºåŒ–ã€æ˜“æ–¼ç†è§£æ™‚æ®µåˆ†å¸ƒ
- **ç¼ºé»**: ä½”æ“šå¤§é‡è¢å¹•ç©ºé–“ã€éœ€æ»‘å‹•æ“ä½œã€ä¸é©åˆè¡Œå‹•è£ç½®

**æœ€çµ‚æ±ºç­–**: ä¿æŒä¸‹æ‹‰é¸å–®ï¼Œä½†åŠ å¼·è¦–è¦ºè¨­è¨ˆ
- **ç†ç”±**: ç©ºé–“æ•ˆç‡ã€æ“ä½œç°¡å–®ã€é©åˆè¡Œå‹•è£ç½®
- **æ”¹é€²**: åŠ å…¥æ¼¸å±¤èƒŒæ™¯ã€emoji æ¨™ç¤ºã€ç‹€æ…‹æç¤º

**åƒè€ƒç ”ç©¶**: å¸‚é¢ä¸»æµ App æ™‚é–“é¸æ“‡ UI
- iOS/Android åŸç”Ÿ Spinner
- Google Calendar: ä¸‹æ‹‰é¸å–®
- Notion: å½ˆå‡ºå¼æ™‚é–“é¸æ“‡å™¨
- Calendly: ç¶²æ ¼å¼æ™‚æ®µé¸æ“‡

---

## è³‡æ–™çµæ§‹

### StudyPlan å®Œæ•´å‹åˆ¥å®šç¾©

```typescript
type StudyPlan = {
  id: string;                    // å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œæ ¼å¼: "plan-{timestamp}"
  title: string;                 // è¨ˆç•«æ¨™é¡Œ
  date: string;                  // è¨ˆç•«æ—¥æœŸï¼Œæ ¼å¼: "YYYY-MM-DD"
  startTime: string;             // é–‹å§‹æ™‚é–“ï¼Œæ ¼å¼: "HH:MM"
  endTime: string;               // çµæŸæ™‚é–“ï¼Œæ ¼å¼: "HH:MM"
  location?: string;             // åœ°é»ï¼ˆé¸å¡«ï¼‰
  reminderTime: string;          // æé†’æ™‚é–“é¸é …: "none" | "10" | "30" | "60"
  reminderDateTime: string;      // æé†’è§¸ç™¼æ™‚é–“ï¼ˆISO stringï¼‰
  completed: boolean;            // æ˜¯å¦å®Œæˆ
  reminderTriggered: boolean;    // æé†’æ˜¯å¦å·²è§¸ç™¼

  // ç´¯ç©è¿½è¹¤æ¬„ä½ï¼ˆæ–°å¢ï¼‰
  targetMinutes?: number;        // è¨ˆç•«ç¸½æ™‚é•·ï¼ˆåˆ†é˜ï¼‰
  completedMinutes?: number;     // å·²å®Œæˆæ™‚é•·ï¼ˆåˆ†é˜ï¼‰
  pomodoroCount?: number;        // å®Œæˆçš„ç•ªèŒ„é˜æ•¸é‡
};
```

### FocusLog å‹åˆ¥å®šç¾©

```typescript
type FocusLog = {
  id: string;                    // å”¯ä¸€è­˜åˆ¥ç¢¼
  userId: string;                // ä½¿ç”¨è€… ID
  date: string;                  // å°ˆæ³¨æ—¥æœŸï¼Œæ ¼å¼: "YYYY-MM-DD"
  sessionMinutes: number;        // å–®æ¬¡å°ˆæ³¨æ™‚é•·ï¼ˆåˆ†é˜ï¼‰
  pointsEarned: number;          // ç²å¾—ç©åˆ†
  timestamp: string;             // è¨˜éŒ„æ™‚é–“æˆ³ï¼ˆISO stringï¼‰
  planId?: string;               // é—œè¯çš„è¨ˆç•« IDï¼ˆé¸å¡«ï¼‰
  planTitle?: string;            // é—œè¯çš„è¨ˆç•«æ¨™é¡Œï¼ˆé¸å¡«ï¼‰
};
```

### LocalStorage è³‡æ–™éµå€¼

| Key | å‹åˆ¥ | èªªæ˜ |
|-----|------|------|
| `currentUser` | `User` | ç•¶å‰ç™»å…¥ä½¿ç”¨è€… |
| `studyPlans` | `StudyPlan[]` | æ‰€æœ‰è®€æ›¸è¨ˆç•« |
| `focusLogs-{userId}` | `FocusLog[]` | ä½¿ç”¨è€…çš„å°ˆæ³¨è¨˜éŒ„ |

### Mock è³‡æ–™ç¯„ä¾‹

**StudyPlan ç¯„ä¾‹**:
```json
{
  "id": "plan-1733212800000",
  "title": "æº–å‚™æœŸä¸­è€ƒ",
  "date": "2025-12-03",
  "startTime": "09:00",
  "endTime": "10:30",
  "location": "åœ–æ›¸é¤¨",
  "reminderTime": "10",
  "reminderDateTime": "2025-12-03T08:50:00.000Z",
  "completed": false,
  "reminderTriggered": false,
  "targetMinutes": 90,
  "completedMinutes": 25,
  "pomodoroCount": 1
}
```

**FocusLog ç¯„ä¾‹**:
```json
{
  "id": "log-1733220000000",
  "userId": "user-001",
  "date": "2025-12-03",
  "sessionMinutes": 25,
  "pointsEarned": 25,
  "timestamp": "2025-12-03T11:00:00.000Z",
  "planId": "plan-1733212800000",
  "planTitle": "æº–å‚™æœŸä¸­è€ƒ"
}
```

---

## å·²çŸ¥å•é¡Œèˆ‡é™åˆ¶

### 1. LocalStorage å®¹é‡é™åˆ¶
- **å•é¡Œ**: LocalStorage é€šå¸¸é™åˆ¶ 5-10MB
- **å½±éŸ¿**: é•·æœŸä½¿ç”¨å¯èƒ½é”åˆ°å®¹é‡ä¸Šé™
- **æš«æ™‚æ–¹æ¡ˆ**: å®šæœŸæ¸…ç†èˆŠè³‡æ–™
- **é•·æœŸæ–¹æ¡ˆ**: é·ç§»åˆ° IndexedDB æˆ–å¾Œç«¯è³‡æ–™åº«

### 2. æ™‚å€è™•ç†
- **å•é¡Œ**: æ—¥æœŸæ™‚é–“æœªè€ƒæ…®æ™‚å€è½‰æ›
- **å½±éŸ¿**: è·¨æ™‚å€ä½¿ç”¨å¯èƒ½å‡ºéŒ¯
- **å»ºè­°**: ä½¿ç”¨ `date-fns-tz` æˆ– `luxon` è™•ç†æ™‚å€

### 3. è³‡æ–™é©—è­‰
- **å•é¡Œ**: LocalStorage è³‡æ–™ç¼ºä¹é©—è­‰èˆ‡ migration
- **å½±éŸ¿**: ç‰ˆæœ¬æ›´æ–°æ™‚å¯èƒ½è³‡æ–™ä¸ç›¸å®¹
- **å»ºè­°**:
  - åŠ å…¥ schema ç‰ˆæœ¬è™Ÿ
  - å¯¦ä½œ data migration é‚è¼¯
  - ä½¿ç”¨ Zod/Yup é€²è¡Œè³‡æ–™é©—è­‰

### 4. æ•ˆèƒ½å„ªåŒ–
- **å•é¡Œ**: å¤§é‡è¨ˆç•«èˆ‡è¨˜éŒ„æ™‚ï¼Œåˆ—è¡¨æ¸²æŸ“å¯èƒ½è®Šæ…¢
- **å»ºè­°**:
  - ä½¿ç”¨è™›æ“¬æ»¾å‹•ï¼ˆreact-windowï¼‰
  - å¯¦ä½œåˆ†é æˆ–ç„¡é™æ»¾å‹•
  - ä½¿ç”¨ useMemo å¿«å–è¨ˆç®—çµæœ

---

## æ¸¬è©¦å»ºè­°

### å–®å…ƒæ¸¬è©¦å„ªå…ˆç´š

1. **High Priority**:
   - [ ] ç´¯ç©è¿½è¹¤é‚è¼¯ï¼ˆcompletedMinutes ç´¯åŠ ã€è‡ªå‹•å®Œæˆï¼‰
   - [ ] æ™‚é–“è¡çªæª¢æ¸¬
   - [ ] è¨ˆæ™‚å™¨ç‹€æ…‹è½‰æ›
   - [ ] LocalStorage CRUD æ“ä½œ

2. **Medium Priority**:
   - [ ] æ—¥æœŸæ™‚é–“æ ¼å¼åŒ–
   - [ ] ç©åˆ†è¨ˆç®—
   - [ ] è¨ˆç•«æ’åºèˆ‡ç¯©é¸

3. **Low Priority**:
   - [ ] UI å…ƒä»¶å¿«ç…§æ¸¬è©¦
   - [ ] å‹•ç•«èˆ‡äº’å‹•æ¸¬è©¦

### E2E æ¸¬è©¦å ´æ™¯

1. **å®Œæ•´ç•ªèŒ„é˜æµç¨‹**:
   - å»ºç«‹è¨ˆç•« â†’ å•Ÿå‹•ç•ªèŒ„é˜ â†’ å®Œæˆ â†’ æª¢æŸ¥é€²åº¦ç´¯ç© â†’ è‡ªå‹•å®Œæˆ

2. **å¤šæ¬¡ç´¯ç©æµç¨‹**:
   - å»ºç«‹ 90 åˆ†é˜è¨ˆç•« â†’ å®Œæˆ 3 æ¬¡ 25 åˆ†é˜ç•ªèŒ„é˜ â†’ æª¢æŸ¥é€²åº¦ â†’ è‡ªå‹•æ¨™è¨˜å®Œæˆ

3. **æ™‚é–“è¡çªè™•ç†**:
   - å»ºç«‹è¨ˆç•« A (09:00-10:00) â†’ å˜—è©¦å»ºç«‹è¨ˆç•« B (09:30-10:30) â†’ æª¢æŸ¥è¡çªè­¦å‘Š

---

## éƒ¨ç½²è³‡è¨Š

- **å¹³å°**: GitHub Pages
- **è‡ªå‹•éƒ¨ç½²**: GitHub Actionsï¼ˆpush to main branchï¼‰
- **Live URL**: https://tom54699.github.io/STomato/
- **æœ€å¾Œéƒ¨ç½²**: 2025-12-03ï¼ˆå¾…æ¨é€ï¼‰
- **Commit**: 81db692 - "feat: add plan analysis tab to Insights page"
- **ç‹€æ…‹**: æœ¬åœ°å·²æäº¤ï¼Œç­‰å¾…æ¨é€è‡³é ç«¯

---

## åƒè€ƒè³‡æº

### æ™‚é–“é¸æ“‡ UI/UX ç ”ç©¶
- [Material Design Time Pickers](https://m2.material.io/components/time-pickers)
- [iOS Human Interface Guidelines - Pickers](https://developer.apple.com/design/human-interface-guidelines/pickers)
- [Time Selection UX Patterns - Nielsen Norman Group](https://www.nngroup.com/articles/time-picker-design/)

### ç•ªèŒ„é˜æ–¹æ³•è«–
- [The Pomodoro Technique](https://francescocirillo.com/pages/pomodoro-technique)
- [Focus Time Best Practices](https://todoist.com/productivity-methods/pomodoro-technique)

### React + TypeScript æœ€ä½³å¯¦è¸
- [React TypeScript Cheatsheet](https://react-typescript-cheatsheet.netlify.app/)
- [React Hooks Best Practices](https://kentcdodds.com/blog/react-hooks-pitfalls)

---

## é™„éŒ„ï¼šGit Commit æ­·å²

```
81db692 - feat: add plan analysis tab to Insights page (2025-12-03)
  - æ–°å¢ä¸»åˆ†é åˆ‡æ›å™¨ï¼šå°ˆæ³¨è¶¨å‹¢ & è¨ˆç•«åˆ†æ
  - å®Œæˆç‡ç¸½è¦½ï¼ˆå·²å®Œæˆ/é€²è¡Œä¸­/æœªé–‹å§‹ï¼‰
  - ç§‘ç›®æ™‚é–“åˆ†å¸ƒåˆ†æï¼ˆå‰ 5 åç§‘ç›®ï¼‰
  - æ™‚æ®µåˆ†æï¼ˆæ—©/åˆ/æ™šï¼‰èˆ‡å®Œæˆç‡
  - ç´¯ç©é€²åº¦è¿½è¹¤ï¼ˆå¯å±•é–‹å€å¡Šï¼‰
  - é¿å…è³‡è¨Šéè¼‰çš„ UI/UX è¨­è¨ˆ
  - ç©ºç‹€æ…‹å¼•å°è¨Šæ¯

be203b1 - feat: update ui prototype status (claude) (2025-12-03)
  - æ–°å¢ ui/README.mdï¼š13 å€‹ç•«é¢å®Œæˆåº¦è¿½è¹¤
  - æ–°å¢ notes/2025-12-03-claude.mdï¼šè©³ç´°é–‹ç™¼æ—¥èªŒ

ca59325 - Implement cumulative pomodoro tracking and UI improvements (2025-12-03)
  - æ–°å¢ç´¯ç©ç•ªèŒ„é˜è¿½è¹¤ï¼ˆtargetMinutesã€completedMinutesã€pomodoroCountï¼‰
  - é‡æ–°è¨­è¨ˆé¦–é è¨ˆç•«æŒ‰éˆ•ï¼ˆåœ“å½¢åœ–ç¤º + æ¼¸å±¤æ•ˆæœï¼‰
  - æ”¹é€² StudyPlanner ä¸‹æ‹‰é¸å–®ï¼ˆæ¼¸å±¤èƒŒæ™¯ + emojiï¼‰
  - åœ“ç’°èª¿æ•´èˆ‡è¨ˆç•«æŒ‰éˆ•åŒæ­¥
  - è‡ªå‹•å®Œæˆé‚è¼¯å¯¦ä½œ

07755cd - home change (2025-12-01)
ee3e5a6 - Update pomodoro-school-app: Redesign CourseProgress with dropdown-based UI (2025-12-01)
75fd631 - Fix: Replace missing Zap icon with Clock in Settlement page (2025-12-01)
c4cae12 - Update pomodoro-school-app: simplify settlement and insights pages (2025-12-01)
e1cbf49 - å®Œæ•´çš„ç•ªèŒ„é˜å­¸æ ¡ç©åˆ†æ‡‰ç”¨ï¼šå¯¦ç¾èª²ç¨‹é€²åº¦è¿½è¹¤ç³»çµ± (2025-12-01)
```

---

**æ–‡ä»¶ç¶­è­·è€…**: Claude AI Agent
**è¯çµ¡æ–¹å¼**: é€éé–‹ç™¼è€… @myaninnovation
**æ–‡ä»¶ç‰ˆæœ¬**: 1.0.0
